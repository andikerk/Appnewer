
var refreshRating = function(){

  $('.rating').raty({
    starHalf: '<%= asset_path 'star-half.png' %>',
    starOff: '<%= asset_path 'star-off.png' %>',
    starOn: '<%= asset_path 'star-on.png' %>',
    scoreName: 'comment[rating]'
  });

  $('.rated').raty({
    starHalf: '<%= asset_path 'star-half.png' %>',
    starOff: '<%= asset_path 'star-off.png' %>',
    starOn: '<%= asset_path 'star-on.png' %>',
    readOnly: true,
    score: function() {
      return $(this).attr('data-score');
    }
  });
};

function showConditionsConsent(){
  $('#conditionsconsent').show();
  $('#stripebtn').hide();
}

function hideConditionsConsent(){
  $('#conditionsconsent').hide();
}

function showStripebtn(){
  var check = $("#accept").is(':checked');

  if(check === true){
    $('#stripebtn').show();
  } 
  if(check === false){
    $('#stripebtn').hide();
  } 
}



var begin;
var interval = 1000; 
var sum = 0;  
var looplim;

function startDraw(){ 
  refreshCanvas();
  begin = true;
  looplim = 50;
  setInterval(function(){
    drawLine();
    },
    interval); 
}

function stopDraw(){
  begin = false;
}
function carryOn(){
  begin = true; 
}
function clearThis(){
  location.reload(); 
}
var refreshCanvas = function(){
  var c=document.getElementById("myCanvas");
    c.width = 1800;
    c.height = 600;
} 



function drawLine(){if(begin == true){
    var c=document.getElementById("myCanvas");
    var x = []; var y =[] ;
   // var color = `#${(Math.floor(Math.random()*2560) + 0 ).toString(16)}`;
   //var color = `rgb(${Math.floor(Math.random()*256),0,0 })`;
   //var color = `rgb(${Math.ceil(Math.random()*255 + 0)},${Math.ceil(Math.random()*255 +0 )},${Math.ceil(Math.random()*255 +0 )} )`;
    var picno = Math.floor(Math.random()*3)*600;
    for (var i =  0; i <Math.random()*looplim; i++ ){
      var red = Math.ceil(Math.random()*255);
      var green = Math.ceil(Math.random()*255);
      var blue = Math.ceil(Math.random()*255);
      var a = 1;
    //  var color =`rgb(${red}, ${green}, ${blue})`;
      var color ="rgba"+"("+(red)+","+(green)+","+(blue)+","+(a)+")";

            x[0] = Math.random()*600 + picno; y[0] = Math.random()*600;
            var ctx=c.getContext("2d"); 
            ctx.beginPath();
            ctx.moveTo(x[i],y[i]);
            x[i+1] = Math.random()*600 + picno; y[i+1] = [Math.random()*600];
            ctx.lineTo(x[i+1],y[i+1]);
            ctx.strokeStyle = color;
            ctx.lineWidth = (Math.random()*30) + 5;
            ctx.shadowBlur = 6;
            ctx.shadowColor = color;
            ctx.stroke();
            x[i]=x[i+1];y[i]=y[i+1];
    }    
    sum++;

    }
}


function landingPage(){

  $('#pic1').on('load',function(){$('this').show();})
  $('#pic2').on('load',function(){$('#pic1,this').show();})
  $('#pic3').on('load',function(){$('#pic1,#pic2,#pic3').show();})
  $('#pic1,#pic2,#pic3').css("animation-play-state","running");
  
}




$(document).on('turbolinks:load ajaxSuccess', function(){

  landingPage();
  looplim = 0;
  refreshRating();

  $('.alert').delay(3000).fadeOut(2000);
  $('.notice').delay(3000).fadeOut(2000);
  
// elevateZoom freezes mobile devices, so only for larger screens
// elevateZoom is in vendor/assets


if(window.screen.width>800)
{    
    $('.img-zoom').elevateZoom({
      zoomType: "lens",
      lensShape: "round",
      lensSize: 200
    });
} 

window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#1d8a8a",
      "text": "#62ffaa"
    },
    "button": {
      "background": "transparent",
      "text": "#afed71",
      "border": "#afed71"
    }
  }/*, 
  "content": {"message":"_! K E K S E A L A R M K E K S E A L A R M !_", "dismiss": "KAPIERT!",
    "link": "KEKSEWEITERBILDUNG"
  }*/,"theme": "classic"
})});


});









