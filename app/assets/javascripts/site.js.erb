
var refreshRating = function(){

  $('.rating').raty({
    starHalf: '<%= asset_path 'star-half.png' %>',
    starOff: '<%= asset_path 'star-off.png' %>',
    starOn: '<%= asset_path 'star-on.png' %>',
    scoreName: 'comment[rating]'
  });

  $('.rated').raty({
    starHalf: '<%= asset_path 'star-half.png' %>',
    starOff: '<%= asset_path 'star-off.png' %>',
    starOn: '<%= asset_path 'star-on.png' %>',
    readOnly: true,
    score: function() {
      return $(this).attr('data-score');
    }
  });
};

//consent to terms and conditions--------------------------------

function showConditionsConsent(){
  $('#conditionsconsent').fadeIn();
  $('#stripebtn').hide();
}

function hideConditionsConsent(){
  $('#conditionsconsent').hide();
}

function showStripebtn(){
  var check = $("#accept").is(':checked');

  if(check === true){
    $('#stripebtn').fadeIn();
  } 
  if(check === false){
    $('#stripebtn').hide();
  } 
}

// ----------------------artisanry------------------------
var rot;
var gruen;
var blau;
var opak;
var begin;
var interval = 1000; 
var sum = 0;  
var looplim;
//var fac = 1;

function startDraw(){ 
  refreshCanvas();
  begin = true;
  looplim = 6;
  setInterval(function(){
    drawLine();
    },
    interval); 
}

function stopDraw(){
  begin = false;
}
function carryOn(){
  begin = true; 
}
function clearThis(){
  location.reload(); 
}
var refreshCanvas = function(){
  var c=document.getElementById("myCanvas");
    c.width = 1800;
    c.height = 600;
} 





function drawLine(){if(begin == true){
    var c=document.getElementById("myCanvas");
    var x = []; var y =[] ;
   // var color = `#${(Math.floor(Math.random()*2560) + 0 ).toString(16)}`;
   //var color = `rgb(${Math.floor(Math.random()*256),0,0 })`;
   //var color = `rgb(${Math.ceil(Math.random()*255 + 0)},${Math.ceil(Math.random()*255 +0 )},${Math.ceil(Math.random()*255 +0 )} )`;
    var picno = Math.floor(Math.random()*3)*600;
    for (var i =  0; i <Math.random()*looplim; i++ ){
     // var red = (rot);//(`${rot}`);
     // var red = Math.ceil(Math.random()*255);
      //var green = Math.ceil(Math.random()*255);
     // var blue = Math.ceil(Math.random()*255);

    //  fac *= ( i + 1 );
    // var a = (rot/255);
    //  var color =`rgb(${red}, ${green}, ${blue})`;
   // var kolor ="rgba" + "(" +(red)+ "," +(green)+ "," +(blue)+ "," +(a)+ ")";
      var kolor ="rgba" + "(" +(rot)+ "," +(gruen)+ "," +(blau)+ "," +(opak)+ ")";
            x[0] = Math.random()*600 + picno; y[0] = Math.random()*600;
            var ctx=c.getContext("2d"); 
            ctx.beginPath();
            ctx.moveTo(x[i],y[i]);
            x[i+1] = Math.random()*600 + picno; y[i+1] = [Math.random()*600];
            ctx.lineTo(x[i+1],y[i+1]);
            ctx.strokeStyle = kolor;
            ctx.lineWidth = Math.random()*30 + 4;
            ctx.shadowBlur = Math.random()*16;
            ctx.shadowColor = kolor;
            ctx.stroke();
            x[i]=x[i+1];y[i]=y[i+1];
           
    }
    sum++;
  //  fac = 1;
    }
}

//--------------landing page--------------------------------------------------------
function landingPage(){

  $('#pic1').on('load',function(){$('this').show();})
  $('#pic2').on('load',function(){$('#pic1,this').show();})
  $('#pic3').on('load',function(){$('#pic1,#pic2,#pic3').show();})
  $('#pic1,#pic2,#pic3').css("animation-play-state","running");
  
}



// range sliders----------------------------------------------------------------------

//------------------document ready------------------------------------------------------------------------------

$(document).on('turbolinks:load ajaxSuccess', function(){

  landingPage();
  looplim = 0;
  refreshRating();

  $('.alert').delay(3000).fadeOut(2000);
  $('.notice').delay(3000).fadeOut(2000);
//--------------repairs page------------------------------

  $('#test').animate({left:'40vw',top:'20vh',width: '45vw',height: '19.5vw'},3330).delay(3000).animate({left:'60vw',top:'0vh',width: '0vw',height: '0vw'},3330);
//----------------product show view------------------------------  
// elevateZoom freezes mobile devices, so only for larger screens
// elevateZoom is in vendor/assets

if(window.screen.width>800)
{    
    $('.img-zoom').elevateZoom({
      zoomType: "lens",
      lensShape: "round",
      lensSize: 200
    });
} 

window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#1d8a8a",
      "text": "#62ffaa"
    },
    "button": {
      "background": "transparent",
      "text": "#afed71",
      "border": "#afed71"
    }
  }/*, 
  "content": {"message":"_! K E K S E A L A R M K E K S E A L A R M !_", "dismiss": "KAPIERT!",
    "link": "KEKSEWEITERBILDUNG"
  }*/,"theme": "classic"
})});



//---------------------------------Colorpicker-----------------------------------
function setColor(){

  // Get the slider values,
  // stick them together.
   rot = sliders[0].noUiSlider.get(); 
   gruen = sliders[1].noUiSlider.get(); 
   blau = sliders[2].noUiSlider.get(); 
   opak = sliders[3].noUiSlider.get()/255; 
 

  var color = 'rgba(' +
    sliders[0].noUiSlider.get() + ',' +
    sliders[1].noUiSlider.get() + ',' +
    sliders[2].noUiSlider.get() + ',' +
    (opak) + ')';

  // Fill the color box.

  resultElement.style.color = color;
  resultElement.style.backgroundColor=color;


}

var resultElement = document.getElementById('result'),
  sliders = document.getElementsByClassName('sliders');

for ( var i = 0; i < sliders.length; i++ ) {

  noUiSlider.create(sliders[i], {
    start: 127,
    connect: [true, false],
    orientation: "vertical",
    range: {
      'min': 0,
      'max': 255     
    },
    format: wNumb({
      decimals: 0
    })
  });

  // Bind the color changing function
  // to the slide event.
  sliders[i].noUiSlider.on('slide', setColor);
}


var Zeit = 1500;
var TEXT = ['"Great People"','"Amazing bicycles"','"I recommend it"','"THE place to go!"',
'"Friendly staff"','"So competent!"','"Nice guys!"','"You should go there!"'];
var KOL =["red", "darkyellow", "black", "darkred", "orange"];
setInterval(function(){  var X = Math.random()*50+"vw"; var Y = Math.random()*40+"vw";
                          var T =Math.floor(TEXT.length*Math.random());
                          var S = Math.random()*1.5+.5 + "em";
                          var K = Math.floor(KOL.length*Math.random());



  $('#schnecke').html(TEXT[T]).css('color',KOL[K]).css({'left':X,'top':Y,'font-size':S})
  .fadeIn(Zeit*.2).delay(Zeit*.5).fadeOut(Zeit*.2);},Zeit);

var Zeit1 = 5000;

setInterval(function(){  var X = Math.random()*80 +20+"vw"; var Y = Math.random()*40+"vw";
                          var T =Math.floor(TEXT.length*Math.random());
                          var S = Math.random()*1.5+.5 + "em";
                          var K = Math.floor(KOL.length*Math.random());

  $('#schnecke1').html(TEXT[T]).css('color',KOL[K]).css({'right':X,'top':Y,'font-size':S})
  .fadeIn(Zeit1*.3).delay(Zeit1*.3).fadeOut(Zeit1*.3);},Zeit1);




});









